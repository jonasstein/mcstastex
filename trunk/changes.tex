% Emacs settings: -*-mode: latex; TeX-master: "manual.tex"; -*-

\chapter{New features in \MCS\ \version\ }
\label{c:changes}

This version of \MCS\ implements both new features, as well as many bug corrections, especially for the Windows plateform. Bugs are reported and traced using the \MCS\ Bugzilla system \cite{mczilla_webpage}. We will not present here an extensive list of corrections, and we let the reader refer to this bug reporting service for details. Only important changes are indicated here.

Of course, we can not garranty that the sofware is bullet proof, but we do our best to correct bugs, when they are reported.\index{Bugs}

\section{General}
\label{s:new-features:general}
The license covering the \MCS\ package is the GNU General Pubclic License. See \verb+http://www.gnu.org+ for details.

\section{Kernel}
\label{s:new-features:kernel}
\index{Kernel}

The following changes concern the 'Kernel' (i.e. the \MCS\ meta-language and program). See the dedicated chapter in the {\it User manual} for more details.

\begin{itemize}
\item Instrument description files exchanged between Unix and Windows
  platforms could not always be compiled. This has been solved (bug \#28).
\end{itemize}

\section{Run-time}
\label{s:new-features:run-time}
\index{Library!Run-time}

\begin{itemize}
\item Gravitation support has been validated. There was a bug revealed with long wavelength neutrons. Some components (see e.g. some guides) still do not support this option (bug \#1).
\item Monitor binning was not plotted correctly (not centered). This has been fixed for PGPLOT/McStas, Matlab, Scilab and Octave plotters (bugs \#11, 12, 39).

\item McStas can use MPI parallel processing, if it is properly installed.
\item Alternatively, a basic 'grid' computing may be used to split scan steps onto a list of machines.

\item Plenty of warning messages to guide the user in interpreting possibly wrong results have been added in the simulation output messages (bug \#29, 43).
\item Support for sample environments is now possible using the
  Isotropic\_Sqw in Concentric mode. Refer to the \verb+mcdoc+ help
  page of the component.

\end{itemize}


\section{Components and Library}
\label{s:new-features:components}
\index{Components} \index{Library!Components}

We here list some of the new components (found in the \MCS\ \verb+lib+ directory)
which are detailed in the {\it Component manual}, also mentioned in
the {\it Component Overview} of the {\it User Manual}.

\begin{itemize}
\item the Chopper\_Fermi component has been {\bf removed} has it produced notoriously wrong results. Rather use the new FermiChopper and Vitess\_ChopperFermi components.
\item Many minor bug corrections in:
Arm (bug \#10),
Vitess\_input/output (bug \#11),
Progress\_bar (bug \#14),
Virtual\_output (bug \#18),
Powder1, Powder2 (bugs \#20,21),
Monitor\_nD (bug \#17, 18),
V\_sample (bug \#31)
\item New components:
Isotropic\_Sqw,
Vitess\_ChopperFermi,
PowderN
\end{itemize}

\section{Documentation}
\label{s:new-features:documentation}
As of \MCS\ \version\ an improved and updated tutorial has been integrated
into to the graphical user interface of \MCS . 

The long awaited Component Manual has finally been written.

\section{Tools, installation}
\label{s:new-features:tools}
\index{Tools}
\index{Installing}
  A renewal of most \MCS\ Tools, used to edit and display instrument or
  results,  has been undertaken, aiming at proposing alternatives to the
  Perl+PerlTk+PGPLOT+PDL  libraries.

  Quite a lot of work was achieved in order to solve the installation problems
   that have been encoutered so far. A fully working \MCS\ distribution now
   only requires a C compiler, perl, perl-Tk and one of Matlab, Scilab and
   (PGPLOT, perl-DL). The Plotlib Scilab library has  been included in the
   package, and does not need to be installed separately anymore.

  This has improved significantly the portability of \MCS\ and thus simplified
  the installation of the package. Details about the installation and the
  available tools are given in chapter \ref{installing}.

\begin{itemize}
\item Windows support improved (bugs \#3, 4, 51)
\item {\bf Installation on Windows} systems \emph{requires} to use exclusively {\bf Perl 5.6}. Earlier versions will fail (bug \#3).
\item Many small bug corrections related to Matlab/Scilab capabilities (bugs \#6, 7, 15, 16, 22, 24).
\end{itemize}

\section{Future extensions}
\label{s:future}
The following features are planned for the oncoming releases of \MCS :
\begin{itemize}
\item Support for Matlab and Scilab in \verb+mcresplot+.
\item Language extension 'JUMP' for enabeling loops, 'teleporting'
  etc. in instrument descriptions.
\item Polarised components and magnetic field computation components.
\item Tools to optimize a set of parameters for a better flux and/or
  resolution on a given monitor.
\item Concentric components (on the meta language level, currently the
  Isotropic\_Sqw component has support for concentricness).
\item Improvements to the NeXus data format (initial support is
  already included).
\item Updates to mcresplot to support the Matlab and Scilab backends.
\end{itemize}








