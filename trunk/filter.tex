\section{Filter\_gen: A general filter using a transmission table}
\label{filter-gen}
\index{Optics!Filter}
\index{Sources!from 1D table input}

\component{Filter\_gen}{System}{$x_{min}$, $x_{max}$, $y_{min}$, $y_{max}$, $file$}{$options$}{validated, flat filter}

This component is an ideal flat filter 
that changes the neutron flux according to a 1D input table (text file).

{\bf Filter\_gen} may act as a source ($options$="set") 
or a filter ($options$="multiply", default mode). 
The table itself is a 2 column free format file which accept comment lines. 
The first table column represent wavevector, energy, or wavelength, 
as specified in the $options$ parameter, 
whereas the second column is the transmission/weight modifier.

A usage example as a source would use 
\verb+options="wavelength, set"+, if the first column in the data 
is supposted to be $\lambda$ (in \AA ). 
Another example using the component as a filter would be 
\verb+options="energy, multiply"+ if the first column is $E$ (in meV).

The input parameters are the filter window size 
$x_{min}$, $x_{max}$, $y_{min}$, $y_{max}$, 
the behaviour specification string $options$ and the file to use $file$. 
Additionally, rescaling can be made automatic with the $scaling$ 
and relative $thickness$ parameters.

Some example data files are given with \MCS\ in the 
\verb+MCSTAS/data+ directory as \verb+*.trm+ files for transmission. 

A filter with finite thickness can be simulated by 
surrounding this component with two slits.